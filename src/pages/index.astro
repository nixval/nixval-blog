---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';
import PostItem from '../components/Blog/PostItem.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts'; // Ensure you have this file or replace with strings

// Fetch latest 5 posts
const posts = (await getCollection('blog'))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 5);
---

<BaseLayout title={SITE_TITLE} description={SITE_DESCRIPTION}>
  
  <section class="py-12 md:py-20 text-center">
    <h1 class="text-5xl font-black mb-6 bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
      Hello, AstroDaisy!
    </h1>
    <p class="text-xl text-base-content/80 max-w-2xl mx-auto mb-8">
      An opinionated, beautiful, and functional blog template built with Astro, Tailwind v4, and DaisyUI v5.
    </p>
    <div class="flex gap-4 justify-center">
      <a href="/blog" class="btn btn-primary">Read Blog</a>
      <a href="/about" class="btn btn-neutral">About Me</a>
    </div>
  </section>

  <section>
    <div class="flex items-center justify-between mb-6">
      <h2 class="text-3xl font-bold">Latest Writing</h2>
      <a href="/blog" class="link link-primary">View all posts â†’</a>
    </div>
    
    <ul class="grid gap-6 md:grid-cols-1">
      {posts.map((post) => (
        <PostItem post={post} />
      ))}
    </ul>
  </section>

</BaseLayout>
